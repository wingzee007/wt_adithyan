<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ticket Availability</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 0;
    }
    header {
      background: #e50914;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 24px;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .showtime {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      border-bottom: 1px solid #ddd;
    }
    .showtime:last-child {
      border-bottom: none;
    }
    .btn {
      background: #e50914;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .btn:hover {
      background: #b20710;
    }
  </style>
</head>
<body>
  <header id="pageHeader">üéü Ticket Availability</header>

  <div class="container" id="availabilityContainer">
    <!-- Availability details will be injected -->
  </div>

  <script>
    // Get movie name from query string
    const params = new URLSearchParams(window.location.search);
    const movie = params.get("movie");

    if (movie) {
      document.getElementById("pageHeader").innerText = "üéü Ticket Availability for " + movie;
    }

    // Dummy showtime + seat availability data
    const availabilityData = {
      "Hridayapoorvam": [
        { time: "10:00 AM", seats: 25 },
        { time: "2:00 PM", seats: 40 },
        { time: "6:00 PM", seats: 15 }
      ],
      "Talavara": [
        { time: "11:30 AM", seats: 10 },
        { time: "3:30 PM", seats: 50 },
        { time: "7:30 PM", seats: 5 }
      ],
      "Odum Kuthira Chadum Kuthira": [
        { time: "1:00 PM", seats: 35 },
        { time: "4:00 PM", seats: 20 },
        { time: "9:00 PM", seats: 8 }
      ],
      "LOKAH": [
        { time: "12:00 PM", seats: 12 },
        { time: "5:00 PM", seats: 30 },
        { time: "8:30 PM", seats: 22 }
      ],
      "Maine Pyar Kiya": [
        { time: "10:30 AM", seats: 18 },
        { time: "3:00 PM", seats: 45 },
        { time: "7:00 PM", seats: 9 }
      ]
    };

    const container = document.getElementById("availabilityContainer");

    if (movie && availabilityData[movie]) {
      availabilityData[movie].forEach(show => {
        const div = document.createElement("div");
        div.classList.add("showtime");
        div.innerHTML = `
          <span>‚è∞ ${show.time}</span>
          <span>Seats Available: ${show.seats}</span>
          <button class="btn" onclick="bookTicket('${movie}', '${show.time}')">Book</button>
        `;
        container.appendChild(div);
      });
    } else {
      container.innerHTML = "<p>No availability data found.</p>";
    }

    function bookTicket(movie, time) {
      alert("Booking started for " + movie + " at " + time);
      // Later, redirect to seat selection page
      // window.location.href = "seats.html?movie=" + movie + "&time=" + time;
    }
  </script>
</body>
</html>
